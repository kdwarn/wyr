{% extends 'header.html' %}
{% block title %} - Settings {% endblock %}
{% block content %}
<div id="main" class="block-center">
    <div class="box">
        <h2>Account Settings for {{ current_user.username }}</h2>
        <p><a href="{{ url_for('change_password') }}">Change Password</a></p>
        <p><a href="{{ url_for('change_email') }}">Change Email</a></p>
        <p><a href="{{ url_for('donate') }}">Donations</a></p>
        <p><a href="{{ url_for('delete_account') }}">Delete Account</a></p>
    </div>
    <br>
    <div class="box">
        <h2>Preferences</h2>
        <form method="POST" name="edit" action="/set_pref">
            <input name=_csrf_token type=hidden value="{{ csrf_token() }}">
            Set a tag as your homepage?<br>
            <select name="home_page">
                <option value="">Choose a Tag</option>
            {% for tag in tags %}
                <option value="{{tag.name}}"
                {% if current_user.home_page == tag.name %}
                    SELECTED>
                {% else %}
                    >
                {% endif %}
                {{ tag.name }}</option>
            {% endfor %}
            </select>
            <br><br>
            Auto-close browser tab/window after adding a new doc from booklet?<br>
            {% if current_user.auto_close == 1 %}
                <input type="radio" name="home_page" id="home_page" value="Yes" CHECKED>Yes
                <input type="radio" name="home_page" id="home_page" value="No">No
            {% else %}
                <input type="radio" name="home_page" id="home_page" value="Yes">Yes
                <input type="radio" name="home_page" id="home_page" value="No" CHECKED>No
            {% endif %}
            {% if current_user.mendeley == 1 %}
                <br><br>
                Include unread items from Mendeley?<br>
                {% if current_user.home_page == 1 %}
                    <input type="radio" name="include_m_unread" id="include_m_unread" value="1" CHECKED>Yes
                    <input type="radio" name="include_m_unread" id="include_m_unread" value="0">No
                {% else %}
                    <input type="radio" name="include_m_unread" id="include_m_unread" value="1">Yes
                    <input type="radio" name="include_m_unread" id="include_m_unread" value="0" CHECKED>No
                {% endif %}
            {% endif %}
            {% if current_user.goodreads == 1 %}
                <br><br>
                Include to-read shelf from Goodreads?<br>
                {% if current_user.home_page == 1 %}
                    <input type="radio" name="include_g_unread" id="include_m_unread" value="1" CHECKED>Yes
                    <input type="radio" name="include_g_unread" id="include_m_unread" value="0">No
                {% else %}
                    <input type="radio" name="include_g_unread" id="include_m_unread" value="1">Yes
                    <input type="radio" name="include_g_unread" id="include_m_unread" value="0" CHECKED>No
                {% endif %}
            {% endif %}
            <br><br>
            <button type="submit" name="submit" value="Submit">Save</button>
        </form>
    </div>
    <br>
    <div class="box">
        <h2>Sources</h2>
        <p>Mendeley |
        {% if current_user.mendeley == 1 %}
            Authorized &#10003; &nbsp;
            <a href="{{ url_for('deauthorize', name='Mendeley') }}">Deauthorize</a> |
            <a href="{{ url_for('refresh', name='Mendeley') }}">Refresh</a>
        {% else %}
            <a href="{{ url_for('mendeley.mendeley_login') }}">Authorize</a>
        {% endif %}
        </p>
        <p>Goodreads |
        {% if current_user.goodreads == 1 %}
            Authorized &#10003; &nbsp;
            <a href="{{ url_for('deauthorize', name='Goodreads') }}">Deauthorize</a> |
            <a href="{{ url_for('refresh', name='Goodreads') }}">Refresh</a>
        {% else %}
            <a href="{{ url_for('goodreads.goodreads_login') }}">Authorize</a>
        {% endif %}
        </p>
        <p>Others coming!</p>
        <p class="info left">Note: When you first authorize a source, it may take
        some time to complete the authorization, particularly if you have a lot
        of items at the source. (For instance, it takes about 2 minutes to collect
        about 500 documents from Mendeley). However, after this
        - when viewing what you've read - load time is quick.
        </p>
        <p class="info left">Also note: What You've Read will only check for changes
        1 week since the last time it did so. So, if you load the site, make a change
        on one of these sources,
        and then immediately re-load to see the change, it won't be there unless
        you manually refresh it, by clicking on the "Refresh" link next to the source.</p>
    </div>
    <br>
    <div class="box">
        <h2>Import Bookmarks</h2>
        <p class="left"><a href="{{url_for('native.import_bookmarks')}}">Bring your bookmarks</a> from your
        browser or social bookmarking sites to What You've Read. (You will be able to choose which
        folders will be imported.)</p>
    </div>
    <br>
    <div class="box">
        <h2>Bookmarklet</h2>
        <p class="left">If you want to be able to quickly
        <a href="{{url_for('native.add')}}">add</a> things to
        What You've Read, drag this link (<a href="javascript:(function(){window.open('http://www.whatyouveread.com/add?link='+encodeURIComponent(location.href)+'&title='+encodeURIComponent(document.title)); })();">wyr</a>)
        to your bookmarks bar and click it anytime you are on a page you want to
        save. It will open a form (with title and URL pre-populated) to add
        a new item. Fill in any additional information (like author, year, and tags)
        and submit it.</p>
    </div>
    <br><br><br>
</div>
{% endblock %}